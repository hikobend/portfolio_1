<div class='container px-5 px-sm-0'>

  <% if @todo.errors.any? %>
    <div id="error_explanation">
      <h3><%= pluralize(@todo.errors.count, "error") %> prohibited this obj from being saved:</h3>
      <ul>
        <% @todo.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class='row'>
    <div class='col-md-3'>
      <h2>User info</h2>

      <table class='table'>
        <tr><%= attachment_image_tag @user, :profile_image, size:"50x50", format:'jpeg', fallback: "no-image.png" %></tr>
        <tr>
          <th>name</th>
          <th><%= @user.name %></th>
        </tr>
        <tr>
          <th>introduction</th>
          <th><%= @user.email %></th>
        </tr>
        <tr><th>follows</th><th><%= link_to followings_user_path(current_user.id) do %><%= current_user.followings.count %><% end %></th></tr>
        <tr><th>followes</th><th><%= link_to followers_user_path(current_user.id) do %><%= current_user.followers.count %><% end %></th></tr>
      </table>

      <div class='row'>
        <%= link_to 'Edit',edit_user_path(@user), class: "btn btn-outline-secondary btn-block fas fa-user-cog" %>
        <% if current_user.is_followed_by?(@user) %>
        <%= link_to"フォローをはずす", user_relationships_path(@user.id), method: :delete, class:"btn btn-primary"%>
        <% else %>
        <%= link_to"フォローする", user_relationships_path(@user.id), method: :post, class:"btn btn-success"%>
        <% end %>
      </div>
      <h2 class="mt-3">New book</h2>

      <%# render 'books/form', book: @book %>
      <%= form_with model:@todo, local:true do |f| %>
        <div class="form-group">
          <%= f.label :title3 %>
          <%= f.text_field :title3, class: 'form-control book_title' %>
        </div>
        <div class="form-group">
          <%= f.label :title3 %>
          <%= f.text_area :body, class: 'form-control book_body' %>
        </div>
        <div class="form-group">
          <%= f.submit class: 'btn btn-success' %>
        </div>
      <% end %>

    </div>
    <div class='col-md-8 offset-md-1'>
      <h2>Group Detail</h2>
      <table class='table table-hover table-inverse'>
        <thead>
          <tr>
            <th></th>
            <th>グループ名</th>
            <th>紹介文</th>
            <th>メンバー</th>
            <th colspan="3"></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><%= attachment_image_tag(@group, :image, :fill, 50, 50, fallback: "no-image-icon.jpg") %></td>
            <td><%= @group.name %></td>
            <td><%= @group.introduction %></td>
            <td>
              <% @group.users.each do |member| %>
                <%= member.name %><br>
              <% end %>
            </td>
            <td>
              <% if @group.owner_id == current_user.id %>
                <%= link_to 'Edit', edit_group_path(@group), class: "btn btn-sm btn-success" %>
              <% elsif @group.users.include?(current_user) %>
                <%= link_to 'Leave this group', group_path(@group), method: :delete, data: {confirm: "本当にフォロー解除しますか?"}, class: "btn btn-sm btn-danger" %>
              <% else %>
                <%= link_to 'Join this group', group_join_path(@group), class: "btn btn-sm btn-success" %>
              <% end %>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>