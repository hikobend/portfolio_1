<div class="container mt-5">
  <div class="row">
    <div class="col-7 mx-auto">
      <div class="card">
        <div class="card-body">
          <%= attachment_image_tag @user, :profile_image, fallback: "no-image.png", class: "profile_image" %>
          <h5 class="card-title">
            <%= @user.name %>
          </h5>
          <p class="text-small">
             <%= link_to @user.followings.count, followings_user_path(@user) %> フォロー
             <%= link_to @user.followers.count, followers_user_path(@user) %> フォロワー
          </p>
          <% if @user.id == current_user.id %>
            <h6 class="card-subtitle mb-2 text-muted">
              <%= current_user.email %>
            </h6>
            <%= simple_format @user.profile %>
            <br>
            <%= link_to 'ユーザー編集', edit_user_path(@user) %>
          <% elsif @user != current_user %>
          <%# もし@userがフォローされていたら %>
            <% if @user.is_followed_by?(current_user) %>
              <%= link_to user_relationships_path(@user), method: :delete, data: {confirm: "本当にフォロー解除しますか?"} do %>
                <button class="btn btn-danger">フォロー解除</button>
              <% end %>
            <% else %>
              <%= link_to user_relationships_path(@user), method: :post do %>
                <button class="btn btn-primary">フォロー</button>
              <% end %> 
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
